$(document).ready(function(){$("#content-wrapper").on("click",".dialog",function(a){a.preventDefault(),a.stopPropagation();var b=$("#content-wrapper"),c=$(this).data("dialog_id");if("undefined"==typeof c||""==c){var d=$(this).data("xtitle");d=d?d:"\u7cfb\u7edf\u63d0\u793a",c="dialog_"+(65536*(1+Math.random())|0).toString(16).substring(1);var e="";e+='<div id="'+c+'" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">',e+='    <div class="modal-dialog">',e+='        <div class="modal-content">',e+='            <div class="modal-header">',e+='                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">\xd7</button>',e+='                <h4 class="modal-title" id="myModalLabel">'+d+"</h4>",e+="            </div>",e+='            <div class="modal-body">',e+="            \u52a0\u8f7d\u4e2d...",e+="            </div>",e+='            <div class="modal-footer">',e+='                <button type="button" class="btn cancel"  data-dismiss="modal">\u53d6\u6d88</button>',e+='                <button type="button" class="btn btn-primary primary">\u63d0\u4ea4</button>',e+="            </div>",e+="        </div>",e+="    </div>",e+="</div>",b.append(e),$(this).data("dialog_id",c)}var f=$("#"+c),g=f.find(".modal-body"),h="";h=$(this).is("a")?$(this).attr("href"):$(this).data("url");var i=$(this).data("txt"),j=$(this).data("ask"),k=$(this).data("callback");"undefined"!=typeof j?(""==j&&(j="\u662f\u5426\u786e\u5b9a"+$(this).text()),g.text(j),f.off("click",".primary").on("click",".primary",function(a){a.preventDefault(),a.stopPropagation();g.find("form");$.get(h,function(a){$.isFunction(window[k])?window[k](a,f):(f.modal("hide"),null!=a.message&&a.message.length>0&&alert(a.message),0==a.code&&(null!=a.data&&a.data.length>0&&"self"!=a.data?window.location.href=a.data:window.location.reload()))},"json")})):"undefined"!=typeof h&&""!=h?(g.load(h,function(a){$(".datepicker").datepicker({"todayBtn":"linked","forceParse":!0,"autoclose":!0,"todayHighlight":!0})}),f.off("click",".primary").on("click",".primary",function(a){a.preventDefault(),a.stopPropagation();var b=g.find("form");b.find(".has-error").removeClass("has-error"),$.post(b.attr("action"),b.serialize(),function(a){a.code<0?(null!=a.data&&a.data.length>0&&b.find("[name='"+a.data+"']").parents(".form-group").addClass("has-error"),null!=a.message&&a.message.length>0&&alert(a.message)):0==a.code?(null!=a.data&&a.data.length>0&&("undefined"!=typeof a.data&&"self"==a.data?window.location.reload():window.location.href=a.data),f.modal("hide")):a.code>0&&(null!=a.message&&a.message.length>0&&alert(a.message),null!=a.data&&a.data.length>0&&("undefined"!=typeof a.data&&"self"==a.data?window.location.reload():window.location.href=a.data),f.modal("hide"))},"json")})):"undefined"!=typeof i&&""!=i&&(g.html(i),f.find(".primary").html("\u786e\u5b9a").attr("data-dismiss","modal"),f.find(".cancel").remove()),f.modal("show")})});