function loading(){$("#sys-loading").modal("show")}function loaded(){$("#sys-loading").modal("hide")}var init=[];init.push(function(){$("#content-wrapper").on("click",".dialog",function(a){a.preventDefault(),a.stopPropagation();var b=$("#content-wrapper"),c=$(this).data("dialog_id");if("undefined"==typeof c||""==c){c="dialog_"+(65536*(1+Math.random())|0).toString(16).substring(1);var d="";d+='<div id="'+c+'" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">',d+='    <div class="modal-dialog">',d+='        <div class="modal-content">',d+='            <div class="modal-header">',d+='                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">\xd7</button>',d+='                <h4 class="modal-title" id="myModalLabel">\u7cfb\u7edf\u63d0\u793a</h4>',d+="            </div>",d+='            <div class="modal-body">',d+="            \u52a0\u8f7d\u4e2d...",d+="            </div>",d+='            <div class="modal-footer">',d+='                <button type="button" class="btn cancel"  data-dismiss="modal">\u53d6\u6d88</button>',d+='                <button type="button" class="btn btn-primary primary">\u63d0\u4ea4</button>',d+="            </div>",d+="        </div>",d+="    </div>",d+="</div>",b.append(d),$(this).data("dialog_id",c)}var e=$("#"+c),f=e.find(".modal-body"),g="";g=$(this).is("a")?$(this).attr("href"):$(this).data("url");var h=$(this).data("txt"),i=$(this).data("ask"),j=$(this).data("callback");"undefined"!=typeof i?(""==i&&(i="\u662f\u5426\u786e\u5b9a"+$(this).text()),f.text(i),e.off("click",".primary").on("click",".primary",function(a){a.preventDefault(),a.stopPropagation();f.find("form");$.get(g,function(a){$.isFunction(window[j])?window[j](a,e):(e.modal("hide"),null!=a.message&&a.message.length>0&&alert(a.message),0==a.code&&(null!=a.data&&a.data.length>0&&"self"!=a.data?window.location.href=a.data:window.location.reload()))},"json")})):"undefined"!=typeof g&&""!=g?(f.load(g,function(a){$(".datepicker").datepicker({"todayBtn":"linked","forceParse":!0,"autoclose":!0,"todayHighlight":!0}),$(".timepicker").timepicker({"todayBtn":"linked","forceParse":!0,"autoclose":!0,"todayHighlight":!0})}),e.off("click",".primary").on("click",".primary",function(a){a.preventDefault(),a.stopPropagation();var b=f.find("form");b.find(".has-error").removeClass("has-error"),$.post(b.attr("action"),b.serialize(),function(a){a.code<0?(null!=a.data&&a.data.length>0&&b.find("[name='"+a.data+"']").parents(".form-group").addClass("has-error"),null!=a.message&&a.message.length>0&&alert(a.message)):0==a.code&&(null!=a.data&&a.data.length>0&&("undefined"!=typeof a.data&&"self"==a.data?window.location.reload():window.location.href=a.data),e.modal("hide"))},"json")})):"undefined"!=typeof h&&""!=h&&(f.html(h),e.find(".primary").html("\u786e\u5b9a").attr("data-dismiss","modal"),e.find(".cancel").remove()),e.modal("show")}),$(".datepicker").datepicker({"todayBtn":"linked","forceParse":!0,"autoclose":!0,"todayHighlight":!0}),$(".timepicker").timepicker({"todayBtn":"linked","forceParse":!0,"autoclose":!0,"todayHighlight":!0})});